
<XFormDesigntime
	xmlns:cws="http://schemas.cordys.com/cws/1.0"
	type="com.cordys.xforms.XFormDesigntime"
	typeVersion="002481EE-993D-11E2-E030-02C88B2B3B65"
	RuntimeDocumentID="0027132C-F779-11E2-F897-EAF426DD7D2A">
	<DocumentID>0027132C-F779-11E2-F897-EAF426DD9D2A</DocumentID>
	<Name>TestRoles2</Name>
	<Description>TestRoles2</Description>
	<CreatedBy>cordysadm</CreatedBy>
	<CreationDate>2013-05-24T22:40:49.265</CreationDate>
	<Notes/>
	<XFormContent>
		<xformhtml
			xmlns="http://schemas.cordys.com/1.0/xform"
			xmlns:xforms="http://www.w3.org/2002/xforms/cr"
			xmlns:ev="http://www.w3.org/2001/xml-events"
			xmlns:wcpforms="http://schemas.cordys.com/wcp/xforms"
			xformsversion="2"
			focusatstartup="true"
			showNotify="true"
			showError="true">
			<xhead>
				<xforms:model
					xmlns:xforms="http://www.w3.org/2002/xforms/cr"
					xmlns:ev="http://www.w3.org/2001/xml-events"
					xmlns:wcpforms="http://schemas.cordys.com/wcp/xforms"
					id="GetUIRoleTreesModel"
					wcpforms:businessElement="tns:return"
					wcpforms:automatic="false"
					wcpforms:gateway="com.eibus.web.soap.Gateway.wcp"
					wcpforms:nontransactional="true"
					singleTransaction="false"
					promptToSave="true"
					isConstraintValidation="false"
					isInitializationRequired="false"
					isApplyAccessControl="false">
					<xforms:instance
						xmlns:xforms="http://www.w3.org/2002/xforms/cr"
						xmlns:wcpforms="http://schemas.cordys.com/wcp/xforms"
						wcpforms:iteratorSize="50">
						<wcpforms:dataset
							src="http://schemas.cordys.com/coe/useradmin/ui/1.0/GetUIRoleTrees"
							operationName="GetUIRoleTrees"
							type="get"
							wcpforms:wsguid="0027132C-F779-11E2-F895-50936EB69D2A">
							<OrgUserDN
								xmlns="http://schemas.cordys.com/coe/useradmin/ui/1.0"
							/>
						</wcpforms:dataset>
					</xforms:instance>
					<wcpforms:xpathmetainfo
						xmlns:wcpforms="http://schemas.cordys.com/wcp/xforms">
						<wcpforms:namespace
							prefix="xmlns">http://schemas.cordys.com/coe/useradmin/ui/1.0</wcpforms:namespace>
						<wcpforms:namespace
							prefix="tns">http://schemas.cordys.com/coe/useradmin/ui/1.0</wcpforms:namespace>
					</wcpforms:xpathmetainfo>
					<wcpforms:instanceschema/>
					<xforms:action
						ev:event="xforms-onresponse">
						<xforms:GetUIRoleTreesModel_OnResponse/>
					</xforms:action>
				</xforms:model>
				<xforms:model
					xmlns:xforms="http://www.w3.org/2002/xforms/cr"
					xmlns:ev="http://www.w3.org/2001/xml-events"
					xmlns:wcpforms="http://schemas.cordys.com/wcp/xforms"
					id="UpdateAssignedRolesModel"
					wcpforms:businessElement="tns:return"
					wcpforms:automatic="false"
					wcpforms:gateway="com.eibus.web.soap.Gateway.wcp"
					wcpforms:nontransactional="true"
					singleTransaction="false"
					promptToSave="true"
					isConstraintValidation="false"
					isInitializationRequired="false"
					isApplyAccessControl="false">
					<xforms:instance
						xmlns:xforms="http://www.w3.org/2002/xforms/cr"
						xmlns:wcpforms="http://schemas.cordys.com/wcp/xforms"
						wcpforms:iteratorSize="50">
						<wcpforms:dataset
							src="http://schemas.cordys.com/coe/useradmin/ui/1.0/UpdateAssignedRoles"
							operationName="UpdateAssignedRoles"
							type="get"
							wcpforms:wsguid="0027132C-F779-11E2-F898-EC437057DD2A">
							<OrgUserDN
								xmlns="http://schemas.cordys.com/coe/useradmin/ui/1.0"
							/>
							<AssignedRoles
								xmlns="http://schemas.cordys.com/coe/useradmin/ui/1.0"
							/>
						</wcpforms:dataset>
					</xforms:instance>
					<wcpforms:xpathmetainfo
						xmlns:wcpforms="http://schemas.cordys.com/wcp/xforms">
						<wcpforms:namespace
							prefix="xmlns">http://schemas.cordys.com/coe/useradmin/ui/1.0</wcpforms:namespace>
						<wcpforms:namespace
							prefix="tns">http://schemas.cordys.com/coe/useradmin/ui/1.0</wcpforms:namespace>
					</wcpforms:xpathmetainfo>
					<wcpforms:instanceschema/>
					<xforms:action
						ev:event="xforms-onrequest">
						<xforms:UpdateAssignedRolesModel_OnRequest/>
					</xforms:action>
				</xforms:model>
				<xml
					xmlns="">
					<xml
						id="tree1_sampleSchema">
						<TreeSchema>
							<searchPath>//*[local-name()='user']/</searchPath>
							<Root>
								<description>Assigned Roles</description>
							</Root>
							<TreeItem>
								<searchPath>*[local-name()='role']</searchPath>
								<description>*[local-name()='description']</description>
								<onselect>selectHandler</onselect>
								<icon>/cordys/wcp/usermanager/icons/organizationalrole.gif</icon>
							</TreeItem>
							<multipleSelect>true</multipleSelect>
						</TreeSchema>
					</xml>
					<xml
						id="tree1_sampleData">
						<data/>
					</xml>
					<xml
						id="tree1_sampleData2">
						<data/>
					</xml>
					<xml
						id="tree2_sampleSchema">
						<TreeSchema>
							<searchPath>//*[local-name()='roles']/</searchPath>
							<Root>
								<description>Unassigned Roles</description>
							</Root>
							<TreeItem>
								<searchPath>*[local-name()='role']</searchPath>
								<description>*[local-name()='description']</description>
								<onselect>selectHandler</onselect>
								<icon>/cordys/wcp/usermanager/icons/organizationalrole.gif</icon>
							</TreeItem>
							<multipleSelect>true</multipleSelect>
						</TreeSchema>
					</xml>
					<xml
						id="tree2_sampleData">
						<data/>
					</xml>
				</xml>
			</xhead>
			<xbody>
				<xforms:group
					wcpforms:layout="horizontal"
					id="xbody_group"
					wcpforms:labelalign="ontop">
					<xforms:group
						appearance="group"
						wcpforms:designLibrary="cas.xforms.designerlibrary.controls.XFormsGroup"
						id="group2"
						wcpforms:layout="vertical"
						wcpforms:class="h_layout"
						wcpforms:size="26.89% 668px"
						wcpforms:labelalign="ontop">
						<div
							xmlns="http://www.w3.org/2002/xforms/cr"
							xformextendedname="tree"
							id="tree2"
							namespace="wcp.library.ui.Tree"
							wcpforms:designLibrary="cas.xforms.designerlibrary.controls.extensions.Tree"
							treeSchema="tree2_sampleSchema"
							treeData="tree2_sampleData"
							leftFolding="false"
							model=""
							wcpforms:layout="vertical"
							wcpforms:class="v_layout_i"
							wcpforms:size="95.25% 615px"
						/>
					</xforms:group>
					<xforms:group
						appearance="group"
						wcpforms:designLibrary="cas.xforms.designerlibrary.controls.XFormsGroup"
						id="group3"
						wcpforms:layout="vertical"
						wcpforms:class="h_layout"
						wcpforms:size="7.79% 667px"
						wcpforms:labelalign="ontop">
						<xforms:group
							appearance="group"
							wcpforms:designLibrary="cas.xforms.designerlibrary.controls.XFormsGroup"
							id="group4"
							wcpforms:layout="vertical"
							wcpforms:class="v_layout_i"
							wcpforms:size="null 243px"
							wcpforms:labelalign="ontop"
						/>
						<xforms:group
							appearance="group"
							wcpforms:designLibrary="cas.xforms.designerlibrary.controls.XFormsGroup"
							id="group5"
							wcpforms:layout="vertical"
							wcpforms:class="v_layout_i"
							wcpforms:size="null 105px"
							wcpforms:labelalign="ontop">
							<xforms:group
								appearance="controlbox"
								wcpforms:designLibrary="cas.xforms.designerlibrary.controls.XFormsControlbox"
								id="controlbox3"
								controltype="button"
								wcpforms:layout="horizontal"
								wcpforms:class="v_layout_i autoextent"
								wcpforms:align="left_align"
								wcpforms:size="null auto">
								<xforms:trigger
									wcpforms:designLibrary="cas.xforms.designerlibrary.controls.XFormsButton"
									id="button3"
									wcpforms:class="h_button"
									wcpforms:size="null 2em">
									<xforms:label
										textIdentifier="0027132C-F779-11E2-F702-163D49F9D5E8">&gt;&gt;</xforms:label>
									<xforms:action
										ev:event="xforms-activate">
										<xforms:button3_Click/>
									</xforms:action>
								</xforms:trigger>
							</xforms:group>
							<xforms:group
								appearance="controlbox"
								wcpforms:designLibrary="cas.xforms.designerlibrary.controls.XFormsControlbox"
								id="controlbox4"
								controltype="button"
								wcpforms:layout="horizontal"
								wcpforms:class="v_layout_i autoextent"
								wcpforms:align="left_align"
								wcpforms:size="null auto">
								<xforms:trigger
									wcpforms:designLibrary="cas.xforms.designerlibrary.controls.XFormsButton"
									id="button4"
									wcpforms:class="h_button"
									wcpforms:size="null 2em">
									<xforms:label
										textIdentifier="0027132C-F779-11E2-F702-163D49F915E8">&lt;&lt;</xforms:label>
									<xforms:action
										ev:event="xforms-activate">
										<xforms:button4_Click/>
									</xforms:action>
								</xforms:trigger>
							</xforms:group>
						</xforms:group>
					</xforms:group>
					<xforms:group
						appearance="group"
						wcpforms:designLibrary="cas.xforms.designerlibrary.controls.XFormsGroup"
						id="group1"
						wcpforms:layout="vertical"
						wcpforms:class="h_layout"
						wcpforms:size="391px 669px"
						wcpforms:labelalign="ontop">
						<div
							xmlns="http://www.w3.org/2002/xforms/cr"
							xformextendedname="tree"
							id="tree1"
							namespace="wcp.library.ui.Tree"
							wcpforms:designLibrary="cas.xforms.designerlibrary.controls.extensions.Tree"
							treeSchema="tree1_sampleSchema"
							treeData="tree1_sampleData"
							leftFolding="false"
							model=""
							wcpforms:layout="vertical"
							wcpforms:class="v_layout_i"
							wcpforms:size="371px 616px"
						/>
					</xforms:group>
					<xforms:group
						appearance="controlbox"
						wcpforms:designLibrary="cas.xforms.designerlibrary.controls.XFormsControlbox"
						id="controlbox1"
						controltype="button"
						wcpforms:layout="horizontal"
						wcpforms:class="h_layout autoextent"
						wcpforms:align="left_align"
						wcpforms:size="9.03% auto">
						<xforms:trigger
							wcpforms:designLibrary="cas.xforms.designerlibrary.controls.XFormsButton"
							id="button1"
							wcpforms:class="h_button"
							wcpforms:size="10.28em 2em">
							<xforms:label
								textIdentifier="0027132C-F779-11E2-F708-EAE0791A95E8">Save</xforms:label>
							<xforms:action
								ev:event="xforms-activate">
								<xforms:button1_Click/>
							</xforms:action>
						</xforms:trigger>
					</xforms:group>
				</xforms:group>
				<div
					xmlns="http://www.w3.org/2002/xforms/cr"
					id="statusbar1"
					xformextendedname="StatusBar"
					namespace="wcp.library.ui.StatusBar"
					wcpforms:designLibrary="cas.xforms.designerlibrary.controls.extensions.StatusBar"
					contentElementId="xbody_group"
					position="footer">
					<table
						xmlns=""
						width="100%"
						border="1">
						<tr
							valign="top">
							<td
								width="100%"
								id="NewPanel1">New Panel1</td>
						</tr>
					</table>
				</div>
			</xbody>
			<xformsscript>
				<![CDATA[function GetUIRoleTreesModel_OnResponse(eventObject)
{
    var response = eventObject.response;
    var userNode = cordys.selectXMLNode(response, ".//*[local-name()='tree']/*[local-name()='assigned']/*[local-name()='user']");
    var data1Node = cordys.selectXMLNode(tree1_sampleData.XMLDocument.documentElement, "//*[local-name()='data']");
    cordys.appendXMLNode(userNode, data1Node);
    tree1.setTreeData("tree1_sampleData"); 
    tree1.root.expand();    
    
    var rolesNode = cordys.selectXMLNode(response, ".//*[local-name()='tree']/*[local-name()='unassigned']/*[local-name()='roles']");
    var data2Node = cordys.selectXMLNode(tree2_sampleData.XMLDocument.documentElement, "//*[local-name()='data']");
    cordys.appendXMLNode(rolesNode, data2Node);
    tree2.setTreeData("tree2_sampleData");    
    tree2.root.expand();    
}

function Form_InitDone(eventObject)
{
    statusbar1.setStatus("");
    GetUIRoleTreesModel.reset();
}
function button1_Click(eventObject)
{
    UpdateAssignedRolesModel.reset();
}
function button3_Click(eventObject)
{
    var selectedItems = tree2.getSelectedItems();
    for (var itemIndex in selectedItems)
    {
        if (selectedItems[itemIndex] != tree2.root)
        {
            tree1.root.addItem(selectedItems[itemIndex].data);
            selectedItems[itemIndex].remove();
        }
    }    
}
function UpdateAssignedRolesModel_OnRequest(eventObject)
{
    var request = eventObject.request;
    var assignedRolesNode = cordys.selectXMLNode(request, ".//*[local-name()='AssignedRoles']");
    var rootNodes = tree1.root.getChildContainer().childNodes;
    for (var nodeIndex=0;nodeIndex<rootNodes.length;nodeIndex++)
    {
       var roleNode = rootNodes[nodeIndex].data.cloneNode(false);
       cordys.appendXMLNode(roleNode, assignedRolesNode);
    }
    // TODO: give value for orgUserDN parameter
}
function button4_Click(eventObject)
{
    var selectedItems = tree1.getSelectedItems();
    for (var itemIndex in selectedItems)
    {
        if (selectedItems[itemIndex] != tree1.root)
        {
            tree2.root.addItem(selectedItems[itemIndex].data);
            selectedItems[itemIndex].remove()
        }
    }     
}

function selectHandler(selectedNode)
{
    if (selectedNode.data != null)
    {
        var dn = selectedNode.data.getAttribute('dn');
        if (dn == null)
        {
            dn = selectedNode.data.getAttribute('id');
        }
        if (dn != null)
        {
            statusbar1.setStatus(dn);
        }
    }
}]]>
			</xformsscript>
			<xforms:action
				ev:event="xforms-initialize-done">
				<xforms:Form_InitDone/>
			</xforms:action>
		</xformhtml>
	</XFormContent>
	<XFormWSDL/>
	<automatic>false</automatic>
	<caption></caption>
	<data/>
	<height></height>
	<imageUrl></imageUrl>
	<info></info>
	<isInternal>false</isInternal>
	<isLegacy>false</isLegacy>
	<isPublicImage>false</isPublicImage>
	<left></left>
	<mode>full</mode>
	<parameters/>
	<qualifiedclassname></qualifiedclassname>
	<showOnStartPage>false</showOnStartPage>
	<taskDescription>TestRoles2</taskDescription>
	<taskName>TestRoles2</taskName>
	<title>true</title>
	<top></top>
	<type>XForm</type>
	<width></width>
	<CompositeControls/>
	<Htms/>
	<Images/>
	<InstanceSchemaFragments/>
	<Javascripts/>
	<ReferredXForms/>
	<Representations/>
	<StyleSheets/>
	<TranslatableApplications/>
	<TranslatableName>
		<TranslatableText
			type="com.cordys.translation.TranslatableText"
			RuntimeDocumentID="0027132C-F779-11E2-F897-EAF426D9DD2A">
			<DocumentID>0027132C-F779-11E2-F897-EAF426D9BD2A</DocumentID>
			<Name>0027132C-F779-11E2-F897-EAF426D9BD2A</Name>
			<Description>0027132C-F779-11E2-F897-EAF426D9BD2A</Description>
			<CreatedBy>cordysadm</CreatedBy>
			<CreationDate>2013-05-24T22:40:49.266</CreationDate>
			<Notes/>
			<Identifier>
				<uri
					id="0027132C-F779-11E2-F897-EAF426D9FD2A"
				/>
			</Identifier>
		</TranslatableText>
	</TranslatableName>
	<TranslatableUITexts>
		<TranslatableUIText
			type="com.cordys.xforms.TranslatableUIText"
			RuntimeDocumentID="0027132C-F779-11E2-F897-EAF426DC3D2A">
			<DocumentID>0027132C-F779-11E2-F897-EAF426DC5D2A</DocumentID>
			<Name>0027132C-F779-11E2-F702-163D49FB55E8</Name>
			<Description>0027132C-F779-11E2-F702-163D49FB55E8</Description>
			<CreatedBy>cordysadm</CreatedBy>
			<CreationDate>2013-05-24T22:40:49.268</CreationDate>
			<Notes/>
			<UIRef>button3</UIRef>
			<TooltipText/>
			<TranslatableName>
				<TranslatableText
					type="com.cordys.translation.TranslatableText"
					RuntimeDocumentID="0027132C-F779-11E2-F897-EAF426DBFD2A">
					<DocumentID>0027132C-F779-11E2-F897-EAF426DC1D2A</DocumentID>
					<Name>0027132C-F779-11E2-F702-163D49F995E8</Name>
					<Description>0027132C-F779-11E2-F702-163D49F995E8</Description>
					<CreatedBy>cordysadm</CreatedBy>
					<CreationDate>2013-05-24T22:40:49.265</CreationDate>
					<Notes/>
					<Identifier>
						<uri
							id="0027132C-F779-11E2-F702-163D49F9D5E8"
						/>
					</Identifier>
				</TranslatableText>
			</TranslatableName>
			<XForm>
				<uri
					id="0027132C-F779-11E2-F897-EAF426DD9D2A"
				/>
			</XForm>
		</TranslatableUIText>
		<TranslatableUIText
			type="com.cordys.xforms.TranslatableUIText"
			RuntimeDocumentID="0027132C-F779-11E2-F897-EAF426DBBD2A">
			<DocumentID>0027132C-F779-11E2-F897-EAF426DBDD2A</DocumentID>
			<Name>0027132C-F779-11E2-F702-163D49FA55E8</Name>
			<Description>0027132C-F779-11E2-F702-163D49FA55E8</Description>
			<CreatedBy>cordysadm</CreatedBy>
			<CreationDate>2013-05-24T22:40:49.267</CreationDate>
			<Notes/>
			<UIRef>button4</UIRef>
			<TooltipText/>
			<TranslatableName>
				<TranslatableText
					type="com.cordys.translation.TranslatableText"
					RuntimeDocumentID="0027132C-F779-11E2-F897-EAF426DB7D2A">
					<DocumentID>0027132C-F779-11E2-F897-EAF426DB9D2A</DocumentID>
					<Name>0027132C-F779-11E2-F702-163D49F8D5E8</Name>
					<Description>0027132C-F779-11E2-F702-163D49F8D5E8</Description>
					<CreatedBy>cordysadm</CreatedBy>
					<CreationDate>2013-05-24T22:40:49.266</CreationDate>
					<Notes/>
					<Identifier>
						<uri
							id="0027132C-F779-11E2-F702-163D49F915E8"
						/>
					</Identifier>
				</TranslatableText>
			</TranslatableName>
			<XForm>
				<uri
					id="0027132C-F779-11E2-F897-EAF426DD9D2A"
				/>
			</XForm>
		</TranslatableUIText>
		<TranslatableUIText
			type="com.cordys.xforms.TranslatableUIText"
			RuntimeDocumentID="0027132C-F779-11E2-F897-EAF426DB3D2A">
			<DocumentID>0027132C-F779-11E2-F897-EAF426DB5D2A</DocumentID>
			<Name>0027132C-F779-11E2-F703-6A95BE26F5E8</Name>
			<Description>0027132C-F779-11E2-F703-6A95BE26F5E8</Description>
			<CreatedBy>cordysadm</CreatedBy>
			<CreationDate>2013-05-24T22:40:49.266</CreationDate>
			<Notes/>
			<UIRef>button1</UIRef>
			<TooltipText/>
			<TranslatableName>
				<TranslatableText
					type="com.cordys.translation.TranslatableText"
					RuntimeDocumentID="0027132C-F779-11E2-F897-EAF426DAFD2A">
					<DocumentID>0027132C-F779-11E2-F897-EAF426DB1D2A</DocumentID>
					<Name>0027132C-F779-11E2-F708-EAE0791A55E8</Name>
					<Description>0027132C-F779-11E2-F708-EAE0791A55E8</Description>
					<CreatedBy>cordysadm</CreatedBy>
					<CreationDate>2013-05-24T22:40:49.267</CreationDate>
					<Notes/>
					<Identifier>
						<uri
							id="0027132C-F779-11E2-F708-EAE0791A95E8"
						/>
					</Identifier>
				</TranslatableText>
			</TranslatableName>
			<XForm>
				<uri
					id="0027132C-F779-11E2-F897-EAF426DD9D2A"
				/>
			</XForm>
		</TranslatableUIText>
	</TranslatableUITexts>
	<Webservices>
		<uri
			id="0027132C-F779-11E2-F895-50936EB69D2A"
		/>
		<uri
			id="0027132C-F779-11E2-F898-EC437057DD2A"
		/>
	</Webservices>
	<aclFragments/>
	<deliveryModels/>
	<image/>
	<input/>
	<messageParts>
		<MessagePart
			type="com.cordys.task.MessagePart"
			RuntimeDocumentID="0027132C-F779-11E2-F897-EAF426DD3D2A">
			<DocumentID>0027132C-F779-11E2-F897-EAF426DD5D2A</DocumentID>
			<Name>freeformcontrols</Name>
			<Description>freeformcontrols</Description>
			<CreatedBy>cordysadm</CreatedBy>
			<CreationDate>2013-05-24T22:40:49.268</CreationDate>
			<Notes/>
			<isRefExists>false</isRefExists>
			<namespace>http://schemas.cordys.com/1.0/xforms/processapi</namespace>
			<operationName>freeformcontrols</operationName>
		</MessagePart>
		<MessagePart
			type="com.cordys.task.MessagePart"
			RuntimeDocumentID="0027132C-F779-11E2-F897-EAF426D47D2A">
			<DocumentID>0027132C-F779-11E2-F897-EAF426D45D2A</DocumentID>
			<Name>GetUIRoleTreesModel</Name>
			<Description>GetUIRoleTreesModel</Description>
			<CreatedBy>cordysadm</CreatedBy>
			<CreationDate>2013-05-24T22:57:18.734</CreationDate>
			<Notes/>
			<isRefExists>true</isRefExists>
			<namespace>http://schemas.cordys.com/coe/useradmin/ui/1.0</namespace>
			<operationName>GetUIRoleTrees</operationName>
		</MessagePart>
		<MessagePart
			type="com.cordys.task.MessagePart"
			RuntimeDocumentID="0027132C-F779-11E2-F898-EC3B0208FD2A">
			<DocumentID>0027132C-F779-11E2-F898-EC3B0208DD2A</DocumentID>
			<Name>UpdateAssignedRolesModel</Name>
			<Description>UpdateAssignedRolesModel</Description>
			<CreatedBy>cordysadm</CreatedBy>
			<CreationDate>2013-05-24T23:13:14.881</CreationDate>
			<Notes/>
			<isRefExists>true</isRefExists>
			<namespace>http://schemas.cordys.com/coe/useradmin/ui/1.0</namespace>
			<operationName>UpdateAssignedRoles</operationName>
		</MessagePart>
	</messageParts>
	<messages/>
	<output/>
	<tagsContainer/>
	<taskParts/>
</XFormDesigntime>
